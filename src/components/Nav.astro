---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice();
---

<nav class="w-full py-6 bg-zinc-800 flex items-center justify-between px-8 md:px-12 lg:px-20 xl:px-40 2xl:px-80">
    <div class="flex items-center gap-x-6">
        <a href="/dashboard">
            <img src="/img/logo/astro-icon-light-gradient.svg" alt="" class="w-8 h-8">
        </a>
        <a href="/dashboard" class={currentPath === "/dashboard" ? "text-lg text-gray-100 font-bold" : "text-lg text-gray-100/50 hover:text-gray-100/70"}>Dashboard</a>
        <a href="/profile" class={currentPath === "/profile" ? "text-lg text-gray-100 font-bold" : "text-lg text-gray-100/50 hover:text-gray-100/70"}>Profile</a>
    </div>
    <div class="flex items-center gap-x-6">
        <form method="post" action="/api/auth/logout">
            <button>Log out</button>
        </form>
    </div>
</nav>

<script>
	document.forms[0].addEventListener("submit", async (e) => {
		e.preventDefault();
		const formElement = e.target as HTMLFormElement;
		await fetch(formElement.action, {
			method: formElement.method,
			body: new FormData(formElement)
		});
		window.location.href = "/auth/login";
	});
</script>